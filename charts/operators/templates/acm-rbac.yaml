{{- if .Values.acm.enabled }}
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: argocd-project-manager
  annotations:
    argocd.argoproj.io/sync-wave: "2"
rules:
  - apiGroups: 
    - "project.openshift.io"
    resources: 
      - "projects"
    verbs: 
      - "delete"
      - "get" 
      - "list"
      - "watch" 
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: argocd-project-manager-binding
  annotations:
    argocd.argoproj.io/sync-wave: "2"
subjects:
  - kind: ServiceAccount
    name: openshift-gitops-argocd-application-controller
    namespace: openshift-gitops
roleRef:
  kind: ClusterRole
  name: argocd-project-manager
  apiGroup: rbac.authorization.k8s.io
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: argocd-multiclusterhub-manager
  namespace: open-cluster-management
  annotations:
    argocd.argoproj.io/sync-wave: "2"
rules:
  - apiGroups: 
    - "operator.open-cluster-management.io"
    resources: 
      - "multiclusterhubs"
    verbs: 
      - "create"
      - "get"
      - "list"
      - "watch"
      - "update"
      - "delete"
---
{{- end }}